(function(t){function e(e){for(var r,s,a=e[0],c=e[1],u=e[2],d=0,f=[];d<a.length;d++)s=a[d],i[s]&&f.push(i[s][0]),i[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},i={app:0},o=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"0770":function(t,e,n){},2030:function(t,e,n){"use strict";var r=n("9bd5"),i=n.n(r);i.a},3697:function(t,e,n){"use strict";var r=n("93a5"),i=n.n(r);i.a},6468:function(t,e,n){},"74f6":function(t,e,n){},"74fa":function(t,e,n){t.exports=function(){return new Worker(n.p+"21679e1b7ec970b27a30.worker.js")}},"863a":function(t,e,n){},"8d9c":function(t,e,n){"use strict";var r=n("6468"),i=n.n(r);i.a},"93a5":function(t,e,n){},"9bd5":function(t,e,n){},c68c:function(t,e,n){"use strict";var r=n("74f6"),i=n.n(r);i.a},c7f0:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("744f"),n("6c7b"),n("7514"),n("20d6"),n("1c4c"),n("6762"),n("cadf"),n("e804"),n("55dd"),n("d04f"),n("c8ce"),n("217b"),n("7f7f"),n("f400"),n("7f25"),n("536b"),n("d9ab"),n("f9ab"),n("32d7"),n("25c9"),n("9f3c"),n("042e"),n("c7c6"),n("f4ff"),n("049f"),n("7872"),n("a69f"),n("0b21"),n("6c1a"),n("c7c62"),n("84b4"),n("c5f6"),n("2e37"),n("fca0"),n("7cdf"),n("ee1d"),n("b1b1"),n("87f3"),n("9278"),n("5df2"),n("04ff"),n("f751"),n("4504"),n("fee7"),n("ffc1"),n("0d6d"),n("9986"),n("8e6e"),n("25db"),n("e4f7"),n("b9a1"),n("64d5"),n("9aea"),n("db97"),n("66c8"),n("57f0"),n("165b"),n("456d"),n("cf6a"),n("fd24"),n("8615"),n("551c"),n("097d"),n("df1b"),n("2397"),n("88ca"),n("ba16"),n("d185"),n("ebde"),n("2d34"),n("f6b3"),n("2251"),n("c698"),n("a19f"),n("9253"),n("9275"),n("3b2b"),n("3846"),n("4917"),n("a481"),n("28a5"),n("386d"),n("6b54"),n("4f7f"),n("8a81"),n("ac4d"),n("8449"),n("9c86"),n("fa83"),n("48c0"),n("a032"),n("aef6"),n("d263"),n("6c37"),n("9ec8"),n("5695"),n("2fdb"),n("d0b0"),n("5df3"),n("b54a"),n("f576"),n("ed50"),n("788d"),n("14b9"),n("f386"),n("f559"),n("1448"),n("673e"),n("242a"),n("c66f"),n("b05c"),n("34ef"),n("6aa2"),n("15ac"),n("af56"),n("b6e4"),n("9c29"),n("63d9"),n("4dda"),n("10ad"),n("c02b"),n("4795"),n("130f"),n("ac6a"),n("96cf");var r=n("2b0e"),i=n("ce5b"),o=n.n(i);n("bf40");r["default"].use(o.a,{iconfont:"md"});var s,a,c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("router-view")],1)},u=[],l={name:"app"},d=l,f=(n("daf1"),n("2877")),v=Object(f["a"])(d,c,u,!1,null,null,null),h=v.exports,p=n("8c4f"),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",[n("v-navigation-drawer",{attrs:{permanent:""}},[n("v-layout",{staticClass:"sidebar",attrs:{column:""}},[n("generator",{attrs:{settings:t.settings},model:{value:t.output,callback:function(e){t.output=e},expression:"output"}}),n("div",{staticClass:"pa-3"},[n("p",[t._v("\n          Find courses using the\n          "),n("a",{attrs:{href:"https://www.lsa.umich.edu/cg/",target:"_blank"}},[t._v("course guide")]),t._v(".\n        ")]),n("p",[t._v("Add courses on the left side of the screen.")]),n("p",[t._v("Use the calendar view to customize the generation.")]),n("p",[t._v("Mouse clicks or key bindings can be used interchangeably. Key bindings are mostly useful with a trackpad or bad mouse.")]),n("p",[t._v("- Left click or Q 'locks' a section")]),n("p",[t._v("- Middle click or W previews alternatives to a section")]),n("p",[t._v("- Right click or E 'hides' a section")]),n("p",[t._v("- Left click or Q and drag to create blocks")]),n("p",[t._v("Adjust the view by clicking on the time labels on the left side.")]),n("p",{staticClass:"ma-0"},[t._v("It will generate all valid courses in the background, you can continue to customize while it does.")])])],1)],1),t.output?n("schedule-view",{attrs:{settings:t.settings,schedule:t.output.schedule,occurrences:t.output.occurrences},on:{lock:t.onLock,hide:t.onHide,custom:t.onCustom}}):n("schedule-view",{attrs:{settings:t.settings,schedule:[],occurrences:{}},on:{lock:t.onLock,hide:t.onHide,custom:t.onCustom}})],1)},m=[],b=n("2f62"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{column:""}},[n("div",{staticClass:"pa-3"},[n("span",{staticClass:"title"},[t._v("Schedule generator")])]),n("v-list",{staticClass:"list"},[t._l(t.courses,function(e,r){return n("schedule-course",{key:r+e.id,attrs:{course:e},on:{toggle:function(t){e.enabled=!e.enabled},remove:function(e){return t.courses.splice(r,1)}}})}),n("v-layout",{attrs:{"px-3":"","align-center":""}},[n("v-btn",{staticClass:"ml-0",attrs:{flat:"",icon:"",disabled:!t.input||t.isLoadingInput,loading:t.isLoadingInput},on:{click:function(e){return t.submit()}}},[n("v-icon",[t._v("add")])],1),n("v-text-field",{attrs:{label:"Course ID",hint:"ex: 'MATH 115' 'math115'"},nativeOn:{keydown:function(e){return t.onKeyDown(e)}},model:{value:t.rawInput,callback:function(e){t.rawInput=e},expression:"rawInput"}})],1)],2),t.status&&t.status.scheduleCount>0?n("div",{staticClass:"nav-area",class:{active:null!=t.status}},[n("v-btn",{attrs:{icon:"",disabled:0==t.index},on:{click:function(e){--t.index}}},[n("v-icon",[t._v("chevron_left")])],1),n("span",{staticClass:"display"},[t._v(t._s(t.index+1))]),n("span",{staticClass:"display"},[t._v("of")]),n("span",{staticClass:"display"},[t._v(t._s(t.status.scheduleCount))]),n("v-btn",{attrs:{icon:"",disabled:t.index+1==t.status.scheduleCount},on:{click:function(e){++t.index}}},[n("v-icon",[t._v("chevron_right")])],1)],1):t._e(),n("v-progress-linear",{staticClass:"progress",class:{active:t.isGenerating},attrs:{indeterminate:""}})],1)},w=[],k=n("a34a"),x=n.n(k),S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{staticClass:"course",on:{click:function(e){return t.toggle()}}},[n("v-list-tile-action",{staticStyle:{"min-width":"44px"}},[n("v-checkbox",{staticClass:"checkbox",model:{value:t.course.enabled,callback:function(e){t.$set(t.course,"enabled",e)},expression:"course.enabled"}})],1),n("v-list-tile-content",[n("v-list-tile-title",[t._v(t._s(t.course.label))])],1),n("v-btn",{staticClass:"delete",attrs:{icon:""},on:{click:function(e){return t.remove()}}},[n("v-icon",[t._v("delete")])],1)],1)},C=[],O={name:"schedule-course",props:{course:Object},methods:{toggle:function(){this.$emit("toggle")},remove:function(){this.$emit("remove")}}},_=O,P=(n("8d9c"),Object(f["a"])(_,S,C,!1,null,"526d6047",null)),j=P.exports;(function(t){function e(t){return"".concat(t.subjectId).concat(t.courseId)}function n(t){return"".concat(t.subjectId," ").concat(t.courseId)}function r(t){return{courseId:parseInt(t[5]),subjectId:/\(([A-Z]+)\)/.exec(t[4])[1],title:t[7],sections:[]}}t.id=e,t.name=n,t.parse=r})(s||(s={})),function(t){function e(t){return{days:t.slice(10,17).filter(function(t){return""!=t}),time:t[19],location:t[20],startDate:t[17],endDate:t[18]}}function n(t){if("ARR"==t.time)return{start:0,end:0};var e=/(\d\d?)(30)?-(\d\d?)(30)?(AM|PM)/.exec(t.time);if(!e)return console.warn("Failed to parse time: "+t.time),{start:0,end:0};var n=parseInt(e[1]);e[2]&&(n+=parseInt(e[2])/60);var r=parseInt(e[3]);e[4]&&(r+=parseInt(e[4])/60);var i=e[5];return"PM"==i&&r<12&&(r+=12,r-n>4&&(n+=12)),{start:n,end:r}}t.parse=e,t.getTime=n}(a||(a={}));var E,A=["M","T","W","TH","F","S","SU"];function I(t,e){var n=new Map,r=!0,i=!1,o=void 0;try{for(var c,u=t.split("\n")[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var l=c.value,d=/"([^"]*)",/g,f=void 0,v=[];while(f=d.exec(l))v.push(f[1].trim());if(23==v.length){var h=/\(([A-Z]+)\)/.exec(v[4])[1],p=parseInt(v[5]),y=parseInt(v[3]),m=e.get(h+p);m||e.set(h+p,m=s.parse(v));var b=n.get(y);b||n.set(y,b=E.parse(m,v)),b.meetings.push(a.parse(v))}}}catch(g){i=!0,o=g}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}function $(t,e,n){var r=e||t,i=e?t:"GET";return new Promise(function(t,e){var o=new XMLHttpRequest;o.addEventListener("load",function(n){var r=o.responseText;if(-1!=o.getResponseHeader("content-type").indexOf("application/json"))try{r=JSON.parse(r)}catch(n){}o.status>=200&&o.status<300?t(r):e(r)}),o.open(i,r),n?(o.setRequestHeader("content-type","application/json"),o.send(JSON.stringify(n))):o.send()})}function M(t){return D(t)||T(t)||L()}function L(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function T(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function D(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function B(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function R(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(t){B(o,r,i,s,a,"next",t)}function a(t){B(o,r,i,s,a,"throw",t)}s(void 0)})}}(function(t){function e(t,e){var n={id:parseInt(e[3]),component:e[8],flags:e[9],num:parseInt(e[6]),course:t,meetings:[]};return t.sections.push(n),n}function n(t,e){var n=!0,r=!1,i=void 0;try{for(var o,s=t.meetings[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value,u=!0,l=!1,d=void 0;try{for(var f,v=e.meetings[Symbol.iterator]();!(u=(f=v.next()).done);u=!0)for(var h=f.value,p=0,y=A;p<y.length;p++){var m=y[p];if(!(c.days.indexOf(m)<0||h.days.indexOf(m)<0)){var b=a.getTime(c),g=a.getTime(h);if(g.start>=b.start&&g.start<b.end)return!0;if(b.start>=g.start&&b.start<g.end)return!0}}}catch(w){l=!0,d=w}finally{try{u||null==v.return||v.return()}finally{if(l)throw d}}}}catch(w){r=!0,i=w}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return!1}function r(t,e){return!n(t,e)&&(t.course!=e.course||t.flags!=e.flags||t.component!=e.component)}t.parse=e,t.hasOverlap=n,t.isCompatible=r})(E||(E={})),r["default"].use(b["a"]);var H="https://api.mfro.me/scheduler";"localhost"==location.hostname&&(H="http://localhost:8081");var G=new b["a"].Store({state:{courses:[],sections:[]},getters:{courseById:function(t){return function(e){return t.courses.find(function(t){return s.id(t)==e})}},sectionById:function(t){return function(e){return t.sections.find(function(t){return t.id==e})}}},mutations:{ADD_COURSE:function(t,e){e instanceof Array||(e=[e]);var n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(-1!=t.courses.indexOf(a))console.error("course already exists",a);else for(var c in t.courses.push(a),a.sections)t.sections.push(a.sections[c])}}catch(u){r=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}},actions:{load:function(){var t=R(x.a.mark(function t(e,n){var r,i,o,s,a,c,u;return x.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.commit,i=e.getters,e.state,o=i.courseById(n),!o){t.next=4;break}return t.abrupt("return",o);case 4:return s=ue.currentRoute.params.term,t.next=7,$("".concat(H,"/term/").concat(s,"/course/").concat(n));case 7:return a=t.sent,c=new Map,I(a,c),1!=c.size&&console.warn("Parsed multiple courses in 'load ".concat(n,"'")),u=M(c.values()),r("ADD_COURSE",u),t.abrupt("return",u[0]);case 14:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}()}}),F=n("74fa"),W=n.n(F),z=new W.a,Y=[],J=new Set,N=0;function U(t){console.log("start",performance.now()),z.postMessage({type:"run",body:{nonce:++N,input:t}})}function X(t){return console.log("get",performance.now()),new Promise(function(e,n){Y.push(e),z.postMessage({type:"get",body:t})})}function V(t){return J.add(t),function(){return J.delete(t)}}function K(t){return Q(t)||q(t)||Z()}function Z(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function q(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function Q(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(n,!0).forEach(function(e){nt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rt(t){var e=[],n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value,u=!0,l=!1,d=void 0;try{for(var f,v=c.meetings[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var h=f.value,p=a.getTime(h),y=!0,m=!1,b=void 0;try{for(var g,w=h.days[Symbol.iterator]();!(y=(g=w.next()).done);y=!0){var k=g.value;e.push(et({day:k},p))}}catch(x){m=!0,b=x}finally{try{y||null==w.return||w.return()}finally{if(m)throw b}}}}catch(x){l=!0,d=x}finally{try{u||null==v.return||v.return()}finally{if(l)throw d}}}}catch(x){r=!0,i=x}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return e}function it(t,e,n,r){var i,o,s=e.sections.filter(function(t){return!r.includes(t.id)}),a=s.filter(function(t){return n.includes(t.id)}),c=a.find(function(t){return t.flags.includes("P")}),u=a.filter(function(t){return t.flags.includes("A")}),l=a.find(function(t){return t.flags.includes("S")});i=c?[c]:st(s,u),o=l?[l]:s.filter(function(t){return t.flags.includes("S")}),t.sections.push(i.map(function(t){var e=at(s,t);return[t].concat(K(e))})),o.length>0&&t.sections.push(o.map(function(t){return[t]}))}function ot(t,e,n){var r={segments:[],sections:[]},i=!0,o=!1,s=void 0;try{for(var a,c=t[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var u=a.value;it(r,u,e,n)}}catch(l){o=!0,s=l}finally{try{i||null==c.return||c.return()}finally{if(o)throw s}}return r.segments=r.sections.map(function(t){return t.map(function(t){return rt(t)})}),r}function st(t,e){var n=e.map(function(e){return t.reduce(function(t,n){return n.flags.includes("A")?e.component!=n.component||e.num>=n.num?t:!t||n.num<t.num?n:t:t},null)});return t.filter(function(t){if(!t.flags.includes("P"))return!1;var r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value;if(t.num<c.num)return!1}}catch(p){i=!0,o=p}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}var u=!0,l=!1,d=void 0;try{for(var f,v=n[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var h=f.value;if(h&&t.num>h.num)return!1}}catch(p){l=!0,d=p}finally{try{u||null==v.return||v.return()}finally{if(l)throw d}}return!0})}function at(t,e){var n=new Map,r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value;if(c.flags.includes("A")&&(!(c.num>e.num)&&Math.floor(c.course.courseId/10)==Math.floor(e.course.courseId/10))){var u=n.get(c.component);(!u||c.num>u.num)&&n.set(c.component,c)}}}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return K(n.values())}function ct(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function ut(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(t){ct(o,r,i,s,a,"next",t)}function a(t){ct(o,r,i,s,a,"throw",t)}s(void 0)})}}function lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lt(n,!0).forEach(function(e){ft(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lt(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ft(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}G.subscribe(function(t){if("ADD_COURSE"==t.type){var e=t.payload;e instanceof Array||(e=[e]),z.postMessage({type:"courses",body:e})}}),z.addEventListener("message",function(t){var e=t.data;if("progress"==e.type){if(e.body.complete&&console.log("complete",performance.now()),e.body.nonce!=N)return;var n=!0,r=!1,i=void 0;try{for(var o,s=J[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a(e.body)}}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}else"get"==e.type&&Y.shift()(e.body)});var vt,ht=["#16a765","#4986e7","#f83a22","#ffad46","#d06b64","#9a9cff","#ff7537","#7bd148","#ac725e","#42d692","#cabdbf"],pt={name:"generator",components:{ScheduleCourse:j},props:{settings:Object},data:function(){return{index:0,status:null,currentResult:null,isGenerating:!1,isLoadingInput:!1,courses:[],rawInput:""}},computed:{input:function(){var t=/([a-zA-Z]+)\s*(\d{3})/.exec(this.rawInput);return t?"".concat(t[1].toUpperCase()).concat(t[2]):null},generateArgs:function(){var t=this,e=this.courses.filter(function(t){return t.enabled}).map(function(e){return t.$store.getters.courseById(e.id)}),n=ot(e,this.settings.locked,this.settings.hidden),r=!0,i=!1,o=void 0;try{for(var s,a=function(){var t=s.value;n.segments.push([t.days.map(function(e){return{day:e,start:t.start,end:t.end}})])},c=this.settings.custom[Symbol.iterator]();!(r=(s=c.next()).done);r=!0)a()}catch(u){i=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n},output:function(){if(!this.currentResult||!this.status)return null;for(var t={},e=0;e<this.status.sections.length;++e)for(var n=0;n<this.status.sections[e].length;++n){var r=this.status.sections[e][n],i=!0,o=!1,s=void 0;try{for(var a,c=r[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var u=a.value;t[u.id]=(t[u.id]||0)+this.status.occurrences[e][n]}}catch(l){o=!0,s=l}finally{try{i||null==c.return||c.return()}finally{if(o)throw s}}}return{schedule:this.currentResult,occurrences:t}}},watch:{generateArgs:function(t){this.isGenerating=!0,this.index=0,U(t.segments)},index:function(t){this.getCurrentResult()},output:function(t){this.$emit("input",t)},courses:{deep:!0,handler:function(t){localStorage.setItem("umich-scheduler.courses",JSON.stringify(t))}}},created:function(){this.$use(V(this.onProgress));var t=localStorage.getItem("umich-scheduler.courses");if(t){var e=JSON.parse(t),n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;this.addCourse(a.id,a.enabled)}}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}},methods:{onProgress:function(t){var e=!this.status||t.nonce!=this.status.nonce;0==t.scheduleCount&&t.complete?(this.status=null,this.isGenerating=!1):(this.status=dt({},t,{sections:this.generateArgs.sections}),this.isGenerating=!t.complete),e&&this.getCurrentResult()},getCurrentResult:function(){var t=ut(x.a.mark(function t(){var e,n,r,i,o,a,c,u,l,d,f=this;return x.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.status){t.next=2;break}return t.abrupt("return",this.currentResult=null);case 2:return t.next=4,X(this.index);case 4:if(e=t.sent,e){t.next=7;break}return t.abrupt("return",this.currentResult=null);case 7:for(e=e.slice(0,this.status.sections.length),n=e.map(function(t,e){return f.status.sections[e][t]}).flat(),r=0,i=new Map,o=!0,a=!1,c=void 0,t.prev=14,u=this.courses[Symbol.iterator]();!(o=(l=u.next()).done);o=!0)d=l.value,i.set(d.id,ht[r++]);t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](14),a=!0,c=t.t0;case 22:t.prev=22,t.prev=23,o||null==u.return||u.return();case 25:if(t.prev=25,!a){t.next=28;break}throw c;case 28:return t.finish(25);case 29:return t.finish(22);case 30:this.currentResult=n.map(function(t){return{section:t,color:i.get(s.id(t.course)),locked:f.settings.locked.includes(t.id)}});case 31:case"end":return t.stop()}},t,this,[[14,18,22,30],[23,,25,29]])}));function e(){return t.apply(this,arguments)}return e}(),onKeyDown:function(t){13==t.keyCode&&this.input&&!this.isLoadingInput&&this.submit()},addCourse:function(){var t=ut(x.a.mark(function t(e,n){var r;return x.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.courses.find(function(t){return t.id==e})){t.next=2;break}return t.abrupt("return");case 2:return void 0===n&&(n=!0),this.isLoadingInput=!0,t.next=6,this.$store.dispatch("load",e);case 6:if(r=t.sent,this.isLoadingInput=!1,r){t.next=10;break}return t.abrupt("return");case 10:this.courses.push({id:e,label:s.name(r),enabled:n});case 11:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}(),submit:function(){var t=ut(x.a.mark(function t(){var e;return x.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.input,this.rawInput="",t.next=4,this.addCourse(e);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},yt=pt,mt=(n("2030"),Object(f["a"])(yt,g,w,!1,null,"0ad53e46",null)),bt=mt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"schedule-view"},[n("div",{staticClass:"sidebar"},[n("div",{staticClass:"sidebar-spacer"}),n("div",{staticClass:"time-button top"},[n("v-btn",{staticClass:"ma-0",attrs:{flat:"",icon:"",disabled:1==t.display.dayStart},on:{click:function(e){t.display.dayStart--}}},[n("v-icon",[t._v("expand_less")])],1)],1),n("div",{staticClass:"time-button bot"},[n("v-btn",{staticClass:"ma-0",attrs:{flat:"",icon:"",disabled:24==t.display.dayEnd},on:{click:function(e){t.display.dayEnd++}}},[n("v-icon",[t._v("expand_more")])],1)],1),t._l(t.timeLabels,function(e){return n("div",{key:e.value,staticClass:"time",class:e.class,style:t.timeStyle},[e!=t.timeLabels[0]?n("div",{staticClass:"time-click top",on:{click:function(n){t.display.dayStart=e.value},mouseenter:function(n){t.displayPreview.dayStart=e.value},mouseleave:function(e){t.displayPreview.dayStart=null}}}):t._e(),e!=t.timeLabels[t.timeLabels.length-1]?n("div",{staticClass:"time-click bot",on:{click:function(n){t.display.dayEnd=e.value+1},mouseenter:function(n){t.displayPreview.dayEnd=e.value+1},mouseleave:function(e){t.displayPreview.dayEnd=null}}}):t._e(),n("span",{staticStyle:{position:"relative","pointer-events":"none"}},[t._v(t._s(e.label))])])})],2),n("div",{staticClass:"body"},[n("div",{staticClass:"day-labels"},t._l(t.days,function(e){return n("div",{key:e.id,staticClass:"label"},[n("span",[t._v(t._s(e.name))])])}),0),n("div",{staticClass:"calendar"},[n("div",{staticClass:"lines"},t._l(t.timeLabels,function(e){return n("div",{key:e.value,staticClass:"line",style:t.lineStyle})}),0),t._l(t.days,function(e){return n("calendar-day",{key:e.id,attrs:{day:e.id,blocks:t.activeBlocks,display:t.display,interactive:t.interactive},on:{hide:t.onHide,lock:t.onLock,preview:t.onPreview,custom:function(e){return t.$emit("custom",e)}}})})],2)])])},wt=[],kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"day"},[n("div",{staticClass:"custom-target"}),t._l(t.sorted,function(e){return n("calendar-section",{key:e.block.id,attrs:{block:e.block,group:e.group,display:t.display,interactive:t.interactive},on:{hide:function(e){return t.$emit("hide",e)},lock:function(e){return t.$emit("lock",e)},preview:function(e){return t.$emit("preview",e)}}})})],2)},xt=[];(function(t){t[t["A"]=0]="A",t[t["B"]=1]="B",t[t["C"]=2]="C"})(vt||(vt={})),function(t){var e=new Map([[81,t.A],[87,t.C],[69,t.B]]),n=new Set,r=new Map,i=new Map,o=[],s=null,a=null,c=!1,u=!1;function l(t,e){var o;if("release"==t)n.delete(e),o=i;else{if(n.has(e))return;n.add(e),o=r}var a=o.get(e);if(a){c=!1;var u=!0,l=!1,d=void 0;try{for(var f,v=a[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var h=f.value;if(h(s),c)break}}catch(p){l=!0,d=p}finally{try{u||null==v.return||v.return()}finally{if(l)throw d}}}}function d(){if(!a)return console.warn("preventDefault outside event handler");"mousedown"==a.type&&2==a.button&&(u=!0),a.preventDefault(),a=null,c=!0}function f(){return s}function v(t){return o.unshift(t),function(){return o.splice(o.indexOf(t),1)}}function h(t,e){var n=r.get(t);return n||r.set(t,n=[]),n.unshift(e),function(){return n.splice(n.indexOf(e),1)}}function p(t,e){var n=i.get(t);return n||i.set(t,n=[]),n.unshift(e),function(){return n.splice(n.indexOf(e),1)}}window.addEventListener("keydown",function(t){a=t,console.log(t.keyCode);var n=e.get(t.keyCode);null!=n&&(l("press",n),a=null)}),window.addEventListener("keyup",function(t){a=t;var n=e.get(t.keyCode);null!=n&&(l("release",n),a=null)}),window.addEventListener("mousedown",function(e){a=e,s=[e.clientX,e.clientY],0==e.button&&l("press",t.A),1==e.button&&l("press",t.C),2==e.button&&l("press",t.B),a=null}),window.addEventListener("mouseup",function(e){a=e,s=[e.clientX,e.clientY],0==e.button&&l("release",t.A),1==e.button&&l("release",t.C),2==e.button&&l("release",t.B),a=null}),window.addEventListener("mouseenter",function(t){a=t,s=[t.clientX,t.clientY],c=!1;for(var e=0,n=o;e<n.length;e++){var r=n[e];if(r(s),c)break}a=null}),window.addEventListener("mouseenter",function(t){a=t,s=[t.clientX,t.clientY],c=!1;for(var e=0,n=o;e<n.length;e++){var r=n[e];if(r(s),c)break}a=null}),window.addEventListener("mouseleave",function(t){a=t,s=null,c=!1;for(var e=0,n=o;e<n.length;e++){var r=n[e];if(r(s),c)break}a=null}),window.addEventListener("mousemove",function(t){a=t,s=[t.clientX,t.clientY],c=!1;for(var e=0,n=o;e<n.length;e++){var r=n[e];if(r(s),c)break}a=null}),window.addEventListener("contextmenu",function(e){u?(u=!1,e.preventDefault()):l("release",t.B)}),t.consume=d,t.mouse=f,t.onMouse=v,t.onPress=h,t.onRelease=p}(vt||(vt={}));var St=vt,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{directives:[{name:"hover",rawName:"v-hover",value:t.hover,expression:"hover"}],staticClass:"section",class:t.classes,style:t.style},[n("div",{staticClass:"sideline",style:t.sidelineStyle}),n("v-flex",{staticClass:"content"},[n("div",{staticClass:"background",style:t.backgroundStyle}),t.block.isCustom?n("v-layout",{staticClass:"text",attrs:{column:""}},[n("span",{staticClass:"id"},[t._v(t._s(t.block.id))])]):t.block.isCourse?n("v-layout",{staticClass:"text",attrs:{column:""}},[n("span",{staticClass:"id"},[t._v(t._s(t.id))]),n("div",[n("span",[t._v(t._s(t.block.section.title))])]),n("v-layout",{staticClass:"row",attrs:{"px-1":"","justify-space-around":""}},[n("div",{staticClass:"number"},[n("span",{staticClass:"tooltip",attrs:{title:"Section ID"}},[t._v(t._s(t.block.section.id))])]),n("div",{staticClass:"location",staticStyle:{flex:"0 0 auto"}},[n("span",[t._v(t._s(t.block.meeting.location))])]),n("div",{staticClass:"occurrences"},[t.interactive&&t.block.isPreview?n("span",{staticClass:"tooltip",attrs:{title:"Schedules that include this section"}},[t._v(t._s(t.block.occurrences))]):t._e()])])],1):t._e()],1)],1)},Ot=[],_t=new Map,Pt=new Map,jt=new Map;window.addEventListener("keydown",function(t){console.log(t.keyCode);var e=_t.get(t.keyCode)||0;e++,_t.set(t.keyCode,e);var n=Pt.get(t.keyCode);if(n){var r=!0,i=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value;c(e)}}catch(u){i=!0,o=u}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}}}),window.addEventListener("keyup",function(t){var e=_t.get(t.keyCode)||0;_t.set(t.keyCode,0);var n=jt.get(t.keyCode);if(n){var r=!0,i=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value;c(e)}}catch(u){i=!0,o=u}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}}});var Et={name:"calendar-section",props:{block:Object,group:Object,interactive:Boolean,display:Object},data:function(){return{ready:!1,hover:!1}},computed:{subject:function(){return this.block.section.course.subjectId},id:function(){var t=this.block.section.num.toString();while(t.length<3)t="0"+t;var e=this.block.section.course.courseId.toString();while(e.length<3)e="0"+e;return"".concat(this.subject," ").concat(e," - ").concat(this.block.section.component," ").concat(t)},classes:function(){return{lock:this.block.isGenerated&&this.block.isLocked||this.block.isCustom,hidden:this.block.isPreview&&this.block.isHidden,interactive:this.interactive}},color:function(){return this.interactive&&this.block.isPreview&&0==this.block.occurrences?"gray":this.block.color},backgroundStyle:function(){return{backgroundColor:this.color}},sidelineStyle:function(){return{backgroundColor:this.color}},style:function(){if(!this.ready)return{};var t=this.$parent.$el.getBoundingClientRect(),e=(this.block.end-this.block.start)/(this.display.dayEnd-this.display.dayStart),n=(this.block.start-this.display.dayStart)/(this.display.dayEnd-this.display.dayStart);return{width:"calc(100% - ".concat(8*this.group.size,"px)"),height:"".concat(t.height*e,"px"),top:"".concat(t.height*n,"px"),marginLeft:"".concat(8*this.group.index,"px")}}},created:function(){var t=this;this.$use(St.onPress(St.A,function(e){t.hover&&(St.consume(),t.lock())})),this.$use(St.onPress(St.B,function(e){console.log("x",t.hover),t.hover&&(St.consume(),t.hide())})),this.$use(St.onPress(St.C,function(e){t.hover&&(St.consume(),t.preview())}))},mounted:function(){this.ready=!0,this.$el.onmousedown=function(t){if(1==t.button)return t.preventDefault(),!1}},methods:{lock:function(){this.block.isCustom||this.$emit("lock",this.block)},preview:function(){this.block.isCustom||this.$emit("preview",this.block)},hide:function(){this.$emit("hide",this.block)}}},At=Et,It=(n("3697"),Object(f["a"])(At,Ct,Ot,!1,null,"c3699816",null)),$t=It.exports;function Mt(t,e,n,r){return t.meetings.map(function(i,o){var s=a.getTime(i);return{isCourse:!0,isPreview:!0,id:"".concat(t.id,":").concat(o),days:i.days,start:s.start,end:s.end,color:e,section:t,meeting:i,isHidden:n,occurrences:r}})}function Lt(t){return t.section.meetings.map(function(e,n){var r=a.getTime(e);return{isCourse:!0,isGenerated:!0,id:"".concat(t.section.id,":").concat(n),days:e.days,start:r.start,end:r.end,color:t.color,section:t.section,meeting:e,isLocked:t.locked}})}function Tt(t,e,n,r){return{isCustom:!0,id:t.join("")+"".concat(e,"-").concat(n),days:t,start:e,end:n,color:r}}function Dt(t){return Ht(t)||Rt(t)||Bt()}function Bt(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Rt(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function Ht(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var Gt={name:"calendar-day",components:{CalendarSection:$t},props:{day:String,blocks:Array,interactive:Boolean,display:Object},data:function(){return{dragOrigin:null,customPreview:null}},computed:{sorted:function(){var t=this,e=Dt(this.blocks),n=e.filter(function(e){return e.days.includes(t.day)}).map(function(t){return{block:t,group:{}}}).sort(function(t,e){return t.block.start!=e.block.start?t.block.start-e.block.start:t.block.end-e.block.end}),r=-1,i=[],o=!0,s=!1,a=void 0;try{for(var c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value;if(r<=l.block.start){for(var d=0;d<i.length;d++)i[d].group.size=i.length,i[d].group.index=d;i=[]}i.push(l),r=l.block.end}}catch(v){s=!0,a=v}finally{try{o||null==u.return||u.return()}finally{if(s)throw a}}for(var f=0;f<i.length;f++)i[f].group.size=i.length,i[f].group.index=f;return n}},watch:{customPreview:function(t,e){e&&this.$emit("custom",e),t&&this.$emit("custom",t)}},created:function(){var t=this;this.$use(St.onPress(St.A,function(){t.onDrag(!0,St.mouse())})),this.$use(St.onMouse(function(e,n){t.onDrag(!1,e)})),this.$use(St.onRelease(St.A,function(){t.onRelease()}))},methods:{onDrag:function(t,e){var n=this.$el.getBoundingClientRect(),r=e[1]-n.top;if(t){if(e[0]<n.left||e[0]>=n.right)return;if(e[1]<n.top||e[1]>=n.bottom)return;this.dragOrigin=r}else if(!this.dragOrigin)return;St.consume();var i=n.height/2/(this.display.dayEnd-this.display.dayStart),o=this.display.dayStart+Math.floor(this.dragOrigin/i)/2,s=this.display.dayStart+Math.floor(r/i)/2,a=Math.min(o,s),c=Math.max(o,s)+.5;c<=a||this.customPreview&&a==this.customPreview.start&&c==this.customPreview.end||(this.customPreview=Tt([this.day],a,c,"lightgray"))},onRelease:function(){this.customPreview&&(St.consume(),this.$emit("custom",this.customPreview),this.dragOrigin=null,this.customPreview=null)}}},Ft=Gt,Wt=(n("df57"),Object(f["a"])(Ft,kt,xt,!1,null,"03792f6e",null)),zt=Wt.exports;function Yt(t){return Ut(t)||Nt(t)||Jt()}function Jt(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Nt(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function Ut(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var Xt=[{name:"Monday",id:"M"},{name:"Tuesday",id:"T"},{name:"Wednesday",id:"W"},{name:"Thursday",id:"TH"},{name:"Friday",id:"F"}],Vt={name:"calendar-view",components:{CalendarDay:zt},props:{settings:Object,schedule:Array,occurrences:Object,interactive:{default:!0}},data:function(){return{days:Xt,display:{dayStart:8,dayEnd:18},displayPreview:{dayStart:null,dayEnd:null},previewTarget:null}},computed:{timeLabels:function(){for(var t=[],e=this.display.dayStart;e<this.display.dayEnd;e++){var n=void 0;n=12==e?"12 PM":e<12?"".concat(e," AM"):"".concat(e%12," PM");var r=!1;this.displayPreview.dayStart&&e<this.displayPreview.dayStart?r=!0:this.displayPreview.dayEnd&&e>=this.displayPreview.dayEnd&&(r=!0),t.push({value:e,label:n,class:{fade:r}})}return t},timeStyle:function(){var t=100/(this.display.dayEnd-this.display.dayStart);return{flex:"0 0 ".concat(t,"vh")}},lineStyle:function(){var t=100/(this.display.dayEnd-this.display.dayStart);return{marginBottom:"calc(".concat(t,"vh - 1px)")}},activeBlocks:function(){var t,e,n,r=this,i=(t=this.settings.custom).concat.apply(t,Yt(this.schedule.map(function(t){return Lt(t)}))),o=this.previewTarget;if(!o)return i;if(o.section.flags.includes("P"))n="P";else if(o.section.flags.includes("A"))n="A";else{if(!o.section.flags.includes("S"))throw new Error("???: "+o.section.flags);n="S"}var s=o.section.course.sections.filter(function(t){return t.component==o.section.component&&t.flags.includes(n)}),a=(e=[]).concat.apply(e,Yt(s.map(function(t){var e=r.settings.hidden.includes(t.id),n=r.occurrences[t.id]||0;return Mt(t,o.color,e,n)}))),c=i.filter(function(t){return t.isLocked});return c.concat(a.filter(function(t){return!c.find(function(e){return e.section.id==t.section.id})}))}},methods:{onHide:function(t){this.interactive&&(t.isCourse&&this.$emit("hide",t.section.id),t.isCustom&&this.$emit("custom",t))},onLock:function(t){this.interactive&&t.isCourse&&(this.previewTarget&&!t.isLocked&&(this.previewTarget=null),this.$emit("lock",t.section.id))},onPreview:function(t){this.previewTarget?this.previewTarget=null:this.previewTarget=t},increaseHour:function(){this.display.dayEnd++},decreaseHour:function(){this.display.dayStart--}}},Kt=Vt,Zt=(n("f273"),Object(f["a"])(Kt,gt,wt,!1,null,"5bacca42",null)),qt=Zt.exports,Qt={name:"main-page",components:{Generator:bt,ScheduleView:qt},data:function(){return{output:null,settings:{locked:[],hidden:[],custom:[]}}},computed:{term:function(){return this.$route.params.term},classIds:function(){return this.output?this.output.schedule.map(function(t){return t.section.id}).join("\n"):""}},methods:{onLock:function(t){var e=this,n=this.settings.locked.indexOf(t);if(-1!=n)this.settings.locked.splice(n,1);else{var r=this.$store.getters.sectionById(t),i=this.settings.locked.filter(function(t){var n=e.$store.getters.sectionById(t);return!E.isCompatible(r,n)}),o=!0,s=!1,a=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value;this.settings.locked.splice(this.settings.locked.indexOf(l),1)}}catch(d){s=!0,a=d}finally{try{o||null==u.return||u.return()}finally{if(s)throw a}}n=this.settings.hidden.indexOf(t),-1!=n&&this.settings.hidden.splice(n,1),this.settings.locked.push(t)}},onHide:function(t){var e=this.settings.hidden.indexOf(t);if(-1!=e)this.settings.hidden.splice(e,1);else{this.$store.getters.sectionById(t);e=this.settings.locked.indexOf(t),-1!=e&&this.settings.locked.splice(e,1),this.settings.hidden.push(t)}},onCustom:function(t){var e=this.settings.custom.indexOf(t);-1!=e?this.settings.custom.splice(e,1):this.settings.custom.push(t)}}},te=Qt,ee=(n("d4bb"),Object(f["a"])(te,y,m,!1,null,"009bd280",null)),ne=ee.exports,re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"title"},[t._v("Select a Term")])]),n("v-card-text",[n("v-layout",[n("v-list",{staticClass:"pa-0"},t._l(t.seasons,function(e){return n("v-list-tile",{key:e.id,staticClass:"season lighten-3",class:{primary:t.season==e.id},on:{click:function(n){t.season=e.id}}},[n("v-list-tile-content",[n("v-list-tile-title",[t._v(t._s(e.label))])],1)],1)}),1),n("v-layout",{attrs:{column:""}},[n("v-text-field",{staticClass:"year ma-3",attrs:{type:"number"},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}}),n("v-btn",{attrs:{enabled:t.year&&t.season},on:{click:function(e){return t.submit()}}},[t._v("Go")])],1)],1)],1)],1)],1)},ie=[],oe={name:"term-selector-page",data:function(){return{year:(new Date).getFullYear(),season:"FA",seasons:[{label:"Fall",id:"FA"},{label:"Winter",id:"WN"},{label:"Spring",id:"SP"},{label:"Summer",id:"SS"}]}},methods:{submit:function(){this.$router.push("/".concat(this.season).concat(this.year))}}},se=oe,ae=(n("c68c"),Object(f["a"])(se,re,ie,!1,null,"4fe06d41",null)),ce=ae.exports;r["default"].use(p["a"]);var ue=new p["a"]({routes:[{path:"/:term",component:ne},{path:"*",component:ce}]});function le(t){return ve(t)||fe(t)||de()}function de(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function fe(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function ve(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function he(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ye(t,e,n){return e&&pe(t.prototype,e),n&&pe(t,n),t}function me(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function be(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(t){me(o,r,i,s,a,"next",t)}function a(t){me(o,r,i,s,a,"throw",t)}s(void 0)})}}if("WorkerGlobalScope"in self){var ge=function t(e){if(e==xe){var n=performance.now()+50,r=e.next(function(){return n<performance.now()});ke.postMessage({type:"progress",body:{complete:!r,occurrences:e.occurrences,scheduleCount:e.schedules.length}}),r&&setTimeout(t.bind(null,e),1)}},we=new Map,ke=self,xe=null;ke.addEventListener("message",function(){var t=be(x.a.mark(function t(e){var n,r,i,o,a,c,u,l,d,f,v;return x.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e.data.type,t.next="courses"===t.t0?3:"get"===t.t0?24:"run"===t.t0?28:33;break;case 3:for(n=e.data.body,r=!0,i=!1,o=void 0,t.prev=7,a=n[Symbol.iterator]();!(r=(c=a.next()).done);r=!0)u=c.value,we.set(s.id(u),u);t.next=15;break;case 11:t.prev=11,t.t1=t["catch"](7),i=!0,o=t.t1;case 15:t.prev=15,t.prev=16,r||null==a.return||a.return();case 18:if(t.prev=18,!i){t.next=21;break}throw o;case 21:return t.finish(18);case 22:return t.finish(15);case 23:return t.abrupt("break",33);case 24:return l=e.data.body,d=!xe||l<0||l>=xe.schedules.length?null:xe.schedules[l].map(function(t){return t.id}),ke.postMessage({type:"get",body:d}),t.abrupt("break",33);case 28:return f=e.data.body,v={courses:f.courses.map(function(t){return we.get(t)}).filter(function(t){return t}),hidden:f.hidden,locked:f.locked},xe=new Ce(v),ge(xe),t.abrupt("break",33);case 33:case"end":return t.stop()}},t,null,[[7,11,15,23],[16,,18,22]])}));return function(e){return t.apply(this,arguments)}}())}function Se(t,e){return(65535&t.id)!=t.id&&console.warn("large section id: ".concat(t.id)),(65535&e.id)!=e.id&&console.warn("large section id: ".concat(e.id)),t.id<e.id?t.id<<16|e.id:e.id<<16|t.id}var Ce=function(){function t(e){var n=this;he(this,t),this.input=e,this.segments=[],this.schedules=[],this.occurrences={},this.compatibility=new Set;var r=!0,i=!1,o=void 0;try{for(var s,a=e.courses[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value,u=!0,l=!1,d=void 0;try{for(var f,v=c.sections[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var h=f.value,p=!0,y=!1,m=void 0;try{for(var b,g=e.courses[Symbol.iterator]();!(p=(b=g.next()).done);p=!0){var w=b.value,k=!0,x=!1,S=void 0;try{for(var C,O=w.sections[Symbol.iterator]();!(k=(C=O.next()).done);k=!0){var _=C.value;E.isCompatible(h,_)&&this.compatibility.add(Se(h,_))}}catch(L){x=!0,S=L}finally{try{k||null==O.return||O.return()}finally{if(x)throw S}}}}catch(L){y=!0,m=L}finally{try{p||null==g.return||g.return()}finally{if(y)throw m}}}}catch(L){l=!0,d=L}finally{try{u||null==v.return||v.return()}finally{if(l)throw d}}}}catch(L){i=!0,o=L}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}this.locked=new Set(e.locked),this.hidden=new Set(e.hidden);var P=!0,j=!1,A=void 0;try{for(var I,$=function(){var t=I.value,e=t.sections.filter(function(t){return n.locked.has(t.id)}),r=e.find(function(t){return t.flags.includes("P")}),i=e.filter(function(t){return t.flags.includes("A")}),o=e.find(function(t){return t.flags.includes("S")}),s=void 0;s=r?[r]:Oe(t,i);var a=void 0;a=o?[o]:t.sections.filter(function(t){return t.flags.includes("S")}),n.segments.push({index:0,options:s.map(function(e){var n=_e(t,e);return[e].concat(le(n))})}),a.length>0&&n.segments.push({index:0,options:a.map(function(t){return[t]})})},M=e.courses[Symbol.iterator]();!(P=(I=M.next()).done);P=!0)$()}catch(L){j=!0,A=L}finally{try{P||null==M.return||M.return()}finally{if(j)throw A}}}return ye(t,[{key:"next",value:function(t){return 0==this.segments.length||!this.buildHelper([],0,t)}},{key:"buildHelper",value:function(t,e,n){var r=this.segments[e];t:for(;r.index<r.options.length;++r.index){var i=t.slice(),o=!0,s=!1,a=void 0;try{for(var c,u=r.options[r.index][Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value;if(!this.isValid(i,l))continue t;i.push(l)}}catch(m){s=!0,a=m}finally{try{o||null==u.return||u.return()}finally{if(s)throw a}}if(e+1==this.segments.length){this.schedules.push(i);var d=!0,f=!1,v=void 0;try{for(var h,p=i[Symbol.iterator]();!(d=(h=p.next()).done);d=!0){var y=h.value;this.occurrences[y.id]=(this.occurrences[y.id]||0)+1}}catch(m){f=!0,v=m}finally{try{d||null==p.return||p.return()}finally{if(f)throw v}}if(n())return++r.index,!1}else if(!this.buildHelper(i,e+1,n))return!1}return r.index=0,!0}},{key:"isValid",value:function(t,e){if(this.hidden.has(e.id))return!1;var n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(!this.compatibility.has(Se(e,a)))return!1}}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return!0}}]),t}();function Oe(t,e){var n=e.map(function(e){return t.sections.reduce(function(t,n){return n.flags.includes("A")?e.component!=n.component||e.num>=n.num?t:!t||n.num<t.num?n:t:t},null)});return t.sections.filter(function(t){if(!t.flags.includes("P"))return!1;var r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value;if(t.num<c.num)return!1}}catch(p){i=!0,o=p}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}var u=!0,l=!1,d=void 0;try{for(var f,v=n[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var h=f.value;if(h&&t.num>h.num)return!1}}catch(p){l=!0,d=p}finally{try{u||null==v.return||v.return()}finally{if(l)throw d}}return!0})}function _e(t,e){var n=new Map,r=!0,i=!1,o=void 0;try{for(var s,a=t.sections[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value;if(c.flags.includes("A")&&(!(c.num>e.num)&&Math.floor(c.course.courseId/10)==Math.floor(e.course.courseId/10))){var u=n.get(c.component);(!u||c.num>u.num)&&n.set(c.component,c)}}}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return le(n.values())}function Pe(t){return Ae(t)||Ee(t)||je()}function je(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Ee(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function Ae(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function Ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Me(t,e,n){return e&&$e(t.prototype,e),n&&$e(t,n),t}function Le(t){return Le="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Le(t)}function Te(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function De(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(t){Te(o,r,i,s,a,"next",t)}function a(t){Te(o,r,i,s,a,"throw",t)}s(void 0)})}}if("WorkerGlobalScope"in self){var Be=function(){var t=De(x.a.mark(function t(){return x.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){function e(){He?(He=!1,setTimeout(e,1)):t()}He=!1,setTimeout(e,1)}));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),Re=function(){var t=De(x.a.mark(function t(e,n){var r,i;return x.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:r=x.a.mark(function t(){var r,i;return x.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Be();case 2:if(n==Fe){t.next=4;break}return t.abrupt("return",{v:void 0});case 4:if(r=performance.now()+50,i=n.next(function(){return r<performance.now()}),Ge.postMessage({type:"progress",body:{nonce:e,complete:i,occurrences:n.occurrences,scheduleCount:n.schedules.length}}),!i){t.next=9;break}return t.abrupt("return","break");case 9:case"end":return t.stop()}},t)});case 1:return t.delegateYield(r(),"t0",3);case 3:i=t.t0,t.t1=i,t.next="break"===t.t1?7:8;break;case 7:return t.abrupt("break",12);case 8:if("object"!==Le(i)){t.next=10;break}return t.abrupt("return",i.v);case 10:t.next=1;break;case 12:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),He=!1,Ge=self,Fe=null;Ge.addEventListener("message",function(){var t=De(x.a.mark(function t(e){var n,r,i;return x.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:He=!0,t.t0=e.data.type,t.next="get"===t.t0?4:"run"===t.t0?8:12;break;case 4:return n=e.data.body,r=!Fe||n<0||n>=Fe.schedules.length?null:Fe.schedules[n],Ge.postMessage({type:"get",body:r}),t.abrupt("break",12);case 8:return i=e.data.body,Fe=new ze(i.input),Re(i.nonce,Fe),t.abrupt("break",12);case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}function We(t,e){t instanceof Array||(t=[t]),e instanceof Array||(e=[e]);for(var n=0;n<t.length;++n)for(var r=0;r<e.length;++r)if(t[n].day==e[r].day&&t[n].end>e[r].start&&e[r].end>t[n].start)return!0}var ze=function(){function t(e){var n=this;Ie(this,t),this.lookup=[],this.compatibility=new Set,this.segments=[],this.schedules=[],this.occurrences=e.map(function(t){return t.map(function(){return 0})});var r=e.map(function(t,e){return e});r.sort(function(t,n){return e[t].length-e[n].length}),this.permutation=e.map(function(t,e){return r.indexOf(e)}),e.sort(function(t,e){return t.length-e.length});for(var i=0;i<e.length;++i){var o,s=e[i],a=s.map(function(t,e){return e}),c=s.map(function(t,e){return n.lookup.length+e});(o=this.lookup).push.apply(o,Pe(a)),this.segments.push({index:0,options:c})}for(var u=0;u<this.segments.length;++u){var l=!0,d=!1,f=void 0;try{for(var v,h=this.segments[u].options[Symbol.iterator]();!(l=(v=h.next()).done);l=!0)for(var p=v.value,y=u+1;y<this.segments.length;++y){var m=!0,b=!1,g=void 0;try{for(var w,k=this.segments[y].options[Symbol.iterator]();!(m=(w=k.next()).done);m=!0){var x=w.value,S=this.lookup[p],C=this.lookup[x];We(e[u][S],e[y][C])||this.compatibility.add(this.dualId(p,x))}}catch(O){b=!0,g=O}finally{try{m||null==k.return||k.return()}finally{if(b)throw g}}}}catch(O){d=!0,f=O}finally{try{l||null==h.return||h.return()}finally{if(d)throw f}}}}return Me(t,[{key:"next",value:function(t){return 0==this.segments.length||this.buildHelper([],0,t)}},{key:"buildHelper",value:function(t,e,n){for(var r=this,i=this.segments[e];i.index<i.options.length;++i.index){var o=i.options[i.index];if(this.isValid(t,o)){if(t.push(o),e+1==this.segments.length){var s=this.permutation.map(function(e){return r.lookup[t[e]]});this.schedules.push(s);for(var a=0;a<s.length;++a)this.occurrences[a][s[a]]++;if(n())return++i.index,!1}else if(!this.buildHelper(t,e+1,n))return!1;t.pop()}else if(n())return!1}return i.index=0,!0}},{key:"isValid",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(!this.compatibility.has(this.dualId(a,e)))return!1}}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return!0}},{key:"dualId",value:function(t,e){return t<e?t*this.lookup.length+e:e*this.lookup.length+t}}]),t}();function Ye(){var t=[G.getters.courseById("EECS203"),G.getters.courseById("EECS281"),G.getters.courseById("EECS370"),G.getters.courseById("EECS376")],e=ot(t,[],[]),n=new ze(e.segments),r=performance.now();n.next(function(){return!1});var i=performance.now();console.log("did ".concat(n.schedules.length," in ").concat(i-r," (").concat(r," -> ").concat(i,")"));var o=n.schedules[23],s=o.map(function(t,n){return e.sections[n][t]}).flat();console.log(s)}function Je(){var t=[G.getters.courseById("EECS203"),G.getters.courseById("EECS281"),G.getters.courseById("EECS370"),G.getters.courseById("EECS376")],e=new Ce({courses:t,hidden:[],locked:[]}),n=performance.now();e.next(function(){return!1});var r=performance.now();console.log("did ".concat(e.schedules.length," in ").concat(r-n," (").concat(n," -> ").concat(r,")"))}r["default"].config.productionTip=!1,r["default"].directive("hover",{bind:function(t,e,n){"class"==e.arg||r["default"].set(n.context,e.expression,!1),t.addEventListener("mouseenter",function(i){"class"==e.arg?t.classList.add(e.expression):r["default"].set(n.context,e.expression,!0)}),t.addEventListener("mouseleave",function(i){"class"==e.arg?t.classList.remove(e.expression):r["default"].set(n.context,e.expression,!1)})}}),r["default"].mixin({beforeDestroy:function(){if(this.$using){var t=!0,e=!1,n=void 0;try{for(var r,i=this.$using[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o()}}catch(s){e=!0,n=s}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}}}),r["default"].prototype.$use=function(t){this.$using||(this.$using=[]),this.$using.push(t)},new r["default"]({store:G,router:ue,render:function(t){return t(h)}}).$mount("#app"),self.test1=Ye,self.test2=Je},d4bb:function(t,e,n){"use strict";var r=n("f81d"),i=n.n(r);i.a},daf1:function(t,e,n){"use strict";var r=n("0770"),i=n.n(r);i.a},df57:function(t,e,n){"use strict";var r=n("c7f0"),i=n.n(r);i.a},f273:function(t,e,n){"use strict";var r=n("863a"),i=n.n(r);i.a},f81d:function(t,e,n){}});
//# sourceMappingURL=app.0646db66.js.map